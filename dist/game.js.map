{"version":3,"sources":["C:/Program Files (x86)/Nodist/bin/node_modules/browserify/node_modules/browser-pack/_prelude.js","dist/js/board.js","dist/js/game.js","dist/js/player-ai.js","dist/js/player-human.js","dist/js/player.js","dist/js/utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","apply","__generator","body","verb","v","op","TypeError","_","y","label","ops","pop","trys","push","sent","throw","return","Object","defineProperty","BoardPiece","utils_1","Board","canvas","context","getContext","reset","prototype","map","row","j","column","EMPTY","winnerBoardPiece","Utils","clearCanvas","applyPlayerAction","player","isColumnEverFilled","_a","animateAction","boardPiece","debug","animationFrame","render","console","log","join","getWinner","_this","direction","isWinningSequence","playerPiece","dir","count","countEmpty","k","isWon","DRAW","announceWinner","message","drawText","x","maxWidth","getPlayerColor","PLAYER_1","PLAYER_2","newRow","fillStyle","currentY","doAnimation","drawCircle","strokeStyle","drawMask","board_1","player_human_1","player_ai_1","Game","board","document","querySelector","players","PlayerHuman","PlayerAi","currentPlayerId","isMoveAllowed","isGameWon","start","winner","move","currentPlayer","actionSuccesful","action","getAction","getNextPlayer","addEventListener","game","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","player_1","_super","ownBoardPieceValue","getBoardPieceValue","enemyBoardPiece","getStateValue","state","chainValue","tempRight","tempBottom","tempBottomRight","tempTopRight","Math","abs","chain","transformValues","returnValue","depth","isLost","BIG_POSITIVE_NUMBER","BIG_NEGATIVE_NUMBER","getMove","alpha","beta","stateValue","MAX_DEPTH","minState","maxState","moveQueue","getMockPlayerAction","actionSuccessful","success","nextState","_b","nextValue","choose","max","min","clone","Player","clickPromiseResolver","evt","handleClick","error","event","rect","getBoundingClientRect","clientX","left","clientY","top","getColumnFromCoord","_c","_d","_e","_f","font","_g","save","fillText","restore","beginPath","arc","PI","fill","clearRect","width","height","isCoordOnColumn","coord","columnXBegin","radius","getRandomColumnNumber","floor","random","choice","promise","window","requestAnimationFrame","array","arr","slice","clonedMap","pow"],"mappings":"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","file":"game.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar BoardPiece;\n(function (BoardPiece) {\n    BoardPiece[BoardPiece[\"EMPTY\"] = 0] = \"EMPTY\";\n    BoardPiece[BoardPiece[\"PLAYER_1\"] = 1] = \"PLAYER_1\";\n    BoardPiece[BoardPiece[\"PLAYER_2\"] = 2] = \"PLAYER_2\";\n    BoardPiece[BoardPiece[\"DRAW\"] = 3] = \"DRAW\";\n})(BoardPiece = exports.BoardPiece || (exports.BoardPiece = {}));\nvar Board = (function () {\n    function Board(canvas) {\n        this.canvas = canvas;\n        this.context = canvas.getContext('2d');\n        this.reset();\n    }\n    Board.prototype.reset = function () {\n        this.map = [];\n        for (var i = 0; i < Board.row; i++) {\n            this.map.push([]);\n            for (var j = 0; j < Board.column; j++) {\n                this.map[i].push(BoardPiece.EMPTY);\n            }\n        }\n        this.winnerBoardPiece = BoardPiece.EMPTY;\n        utils_1.Utils.clearCanvas(this);\n    };\n    Board.prototype.applyPlayerAction = function (player, column) {\n        return __awaiter(this, void 0, void 0, function () {\n            var isColumnEverFilled, row, i;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.map[0][column] !== BoardPiece.EMPTY || column < 0 || column >= Board.column) {\n                            return [2 /*return*/, false];\n                        }\n                        isColumnEverFilled = false;\n                        row = 0;\n                        for (i = 0; i < Board.row - 1; i++) {\n                            if (this.map[i + 1][column] !== BoardPiece.EMPTY) {\n                                isColumnEverFilled = true;\n                                row = i;\n                                break;\n                            }\n                        }\n                        if (!isColumnEverFilled) {\n                            row = Board.row - 1;\n                        }\n                        return [4 /*yield*/, this.animateAction(row, column, player.boardPiece)];\n                    case 1:\n                        _a.sent();\n                        this.map[row][column] = player.boardPiece;\n                        this.debug();\n                        return [4 /*yield*/, utils_1.Utils.animationFrame()];\n                    case 2:\n                        _a.sent();\n                        this.render();\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    Board.prototype.debug = function () {\n        console.log(this.map.map(function (row) { return row.join(' '); }).join('\\n'));\n    };\n    Board.prototype.getWinner = function () {\n        var _this = this;\n        if (this.winnerBoardPiece !== BoardPiece.EMPTY) {\n            return this.winnerBoardPiece;\n        }\n        var direction = [\n            [0, -1],\n            [0, 1],\n            [-1, -1],\n            [-1, 0],\n            [-1, 1],\n            [1, -1],\n            [1, 0],\n            [1, 1]\n        ];\n        var isWinningSequence = function (i, j, playerPiece, dir, count) {\n            if (count >= 4) {\n                return true;\n            }\n            if (i < 0 || j < 0 || i >= Board.row || j >= Board.column || _this.map[i][j] !== playerPiece) {\n                return false;\n            }\n            return isWinningSequence(i + dir[0], j + dir[1], playerPiece, dir, count + 1);\n        };\n        var countEmpty = 0;\n        for (var i = 0; i < Board.row; i++) {\n            for (var j = 0; j < Board.column; j++) {\n                var playerPiece = this.map[i][j];\n                if (playerPiece !== BoardPiece.EMPTY) {\n                    for (var k = 0; k < direction.length; k++) {\n                        var isWon = isWinningSequence(i + direction[k][0], j + direction[k][1], playerPiece, direction[k], 1);\n                        if (isWon) {\n                            return this.winnerBoardPiece = playerPiece;\n                        }\n                    }\n                }\n                else {\n                    countEmpty++;\n                }\n            }\n        }\n        if (countEmpty === 0) {\n            return this.winnerBoardPiece = BoardPiece.DRAW;\n        }\n        return BoardPiece.EMPTY;\n    };\n    Board.prototype.announceWinner = function () {\n        if (this.winnerBoardPiece === BoardPiece.EMPTY) {\n            return;\n        }\n        var message = 'Thank you for playing - ';\n        if (this.winnerBoardPiece === BoardPiece.DRAW) {\n            message += \"It's a draw\";\n        }\n        else {\n            message += \"Player \" + this.winnerBoardPiece + \" wins\";\n        }\n        message += \" - Click to reset\";\n        utils_1.Utils.drawText(this.context, {\n            message: message,\n            x: 150,\n            y: 20,\n            maxWidth: 400\n        });\n    };\n    Board.prototype.getPlayerColor = function (boardPiece) {\n        switch (boardPiece) {\n            case BoardPiece.PLAYER_1: return '#ff4136';\n            case BoardPiece.PLAYER_2: return '#0074d9';\n            default: return 'transparent';\n        }\n    };\n    Board.prototype.animateAction = function (newRow, column, boardPiece) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            var fillStyle, currentY, doAnimation;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        fillStyle = this.getPlayerColor(boardPiece);\n                        currentY = 0;\n                        doAnimation = function () { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                utils_1.Utils.clearCanvas(this);\n                                utils_1.Utils.drawCircle(this.context, {\n                                    x: 75 * column + 100,\n                                    y: currentY + 50,\n                                    r: 25,\n                                    fillStyle: fillStyle,\n                                    strokeStyle: 'black'\n                                });\n                                this.render();\n                                currentY += 25;\n                                return [2 /*return*/];\n                            });\n                        }); };\n                        _a.label = 1;\n                    case 1:\n                        if (!(newRow * 75 >= currentY)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, utils_1.Utils.animationFrame()];\n                    case 2:\n                        _a.sent();\n                        doAnimation();\n                        return [3 /*break*/, 1];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ;\n    Board.prototype.render = function () {\n        utils_1.Utils.drawMask(this);\n        var x, y;\n        for (y = 0; y < Board.row; y++) {\n            for (x = 0; x < Board.column; x++) {\n                utils_1.Utils.drawCircle(this.context, {\n                    x: 75 * x + 100,\n                    y: 75 * y + 50,\n                    r: 25,\n                    fillStyle: this.getPlayerColor(this.map[y][x]),\n                    strokeStyle: 'black'\n                });\n            }\n        }\n    };\n    return Board;\n}());\nBoard.row = 6;\nBoard.column = 7;\nexports.Board = Board;\n\n//# sourceMappingURL=board.js.map\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar board_1 = require(\"./board\");\nvar player_human_1 = require(\"./player-human\");\nvar player_ai_1 = require(\"./player-ai\");\nvar utils_1 = require(\"./utils\");\nvar Game = (function () {\n    function Game() {\n        this.board = new board_1.Board(document.querySelector('canvas'));\n        this.players = [\n            new player_human_1.PlayerHuman(board_1.BoardPiece.PLAYER_1, this.board),\n            new player_ai_1.PlayerAi(board_1.BoardPiece.PLAYER_2, this.board)\n        ];\n        this.currentPlayerId = 0;\n        this.reset();\n    }\n    Game.prototype.reset = function () {\n        this.isMoveAllowed = false;\n        this.isGameWon = false;\n        this.board.reset();\n        this.board.render();\n        this.board.debug();\n    };\n    Game.prototype.start = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var winner;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.isMoveAllowed = true;\n                        _a.label = 1;\n                    case 1:\n                        if (!!this.isGameWon) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.move()];\n                    case 2:\n                        _a.sent();\n                        winner = this.board.getWinner();\n                        if (winner !== board_1.BoardPiece.EMPTY) {\n                            console.log('Game over: winner is player ', winner);\n                            this.isGameWon = true;\n                            this.isMoveAllowed = false;\n                            this.board.announceWinner();\n                            return [3 /*break*/, 3];\n                        }\n                        return [3 /*break*/, 1];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Game.prototype.move = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var currentPlayer, actionSuccesful, action;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.isMoveAllowed) {\n                            return [2 /*return*/];\n                        }\n                        currentPlayer = this.players[this.currentPlayerId];\n                        actionSuccesful = false;\n                        _a.label = 1;\n                    case 1:\n                        if (!!actionSuccesful) return [3 /*break*/, 4];\n                        return [4 /*yield*/, currentPlayer.getAction(this.board)];\n                    case 2:\n                        action = _a.sent();\n                        this.isMoveAllowed = false;\n                        return [4 /*yield*/, this.board.applyPlayerAction(currentPlayer, action)];\n                    case 3:\n                        actionSuccesful = _a.sent();\n                        this.isMoveAllowed = true;\n                        if (!actionSuccesful) {\n                            console.log('Move not allowed! Try again.');\n                        }\n                        return [3 /*break*/, 1];\n                    case 4:\n                        this.currentPlayerId = this.getNextPlayer();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Game.prototype.getNextPlayer = function () {\n        return (this.currentPlayerId === 0) ? 1 : 0;\n    };\n    return Game;\n}());\nexports.Game = Game;\ndocument.addEventListener('DOMContentLoaded', function () {\n    var game = new Game();\n    game.start();\n    document.querySelector('canvas').addEventListener('click', function () { return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!game.isGameWon) return [3 /*break*/, 2];\n                    game.reset();\n                    return [4 /*yield*/, utils_1.Utils.animationFrame()];\n                case 1:\n                    _a.sent();\n                    game.start();\n                    _a.label = 2;\n                case 2: return [2 /*return*/];\n            }\n        });\n    }); });\n});\n\n//# sourceMappingURL=game.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar player_1 = require(\"./player\");\nvar board_1 = require(\"./board\");\nvar utils_1 = require(\"./utils\");\nvar PlayerAi = (function (_super) {\n    __extends(PlayerAi, _super);\n    function PlayerAi(boardPiece, board) {\n        var _this = _super.call(this, boardPiece, board) || this;\n        _this.ownBoardPieceValue = _this.getBoardPieceValue(boardPiece);\n        _this.enemyBoardPiece = (boardPiece === board_1.BoardPiece.PLAYER_1) ? board_1.BoardPiece.PLAYER_2 : board_1.BoardPiece.PLAYER_1;\n        return _this;\n    }\n    PlayerAi.prototype.getBoardPieceValue = function (boardPiece) {\n        return (boardPiece === board_1.BoardPiece.EMPTY)\n            ? 0\n            : boardPiece === this.boardPiece\n                ? 1\n                : -1;\n    };\n    PlayerAi.prototype.getStateValue = function (state) {\n        var winnerBoardPiece = board_1.BoardPiece.EMPTY;\n        var chainValue = 0;\n        for (var i = 0; i < board_1.Board.row; i++) {\n            for (var j = 0; j < board_1.Board.column; j++) {\n                var tempRight = 0, tempBottom = 0, tempBottomRight = 0, tempTopRight = 0;\n                for (var k = 0; k <= 3; k++) {\n                    if (j + k < board_1.Board.column) {\n                        tempRight += this.getBoardPieceValue(state[i][j + k]);\n                    }\n                    if (i + k < board_1.Board.row) {\n                        tempBottom += this.getBoardPieceValue(state[i + k][j]);\n                    }\n                    if (i + k < board_1.Board.row && j + k < board_1.Board.column) {\n                        tempBottomRight += this.getBoardPieceValue(state[i + k][j + k]);\n                    }\n                    if (i - k >= 0 && j + k < 7) {\n                        tempTopRight += this.getBoardPieceValue(state[i - k][j + k]);\n                    }\n                }\n                chainValue += tempRight * tempRight * tempRight;\n                chainValue += tempBottom * tempBottom * tempBottom;\n                chainValue += tempBottomRight * tempBottomRight * tempBottomRight;\n                chainValue += tempTopRight * tempTopRight * tempTopRight;\n                if (Math.abs(tempRight) === 4) {\n                    winnerBoardPiece = tempRight > 0 ? this.boardPiece : this.enemyBoardPiece;\n                }\n                else if (Math.abs(tempBottom) === 4) {\n                    winnerBoardPiece = tempBottom > 0 ? this.boardPiece : this.enemyBoardPiece;\n                }\n                else if (Math.abs(tempBottomRight) === 4) {\n                    winnerBoardPiece = tempBottomRight > 0 ? this.boardPiece : this.enemyBoardPiece;\n                }\n                else if (Math.abs(tempTopRight) === 4) {\n                    winnerBoardPiece = tempTopRight > 0 ? this.boardPiece : this.enemyBoardPiece;\n                }\n            }\n        }\n        return {\n            winnerBoardPiece: winnerBoardPiece,\n            chain: chainValue\n        };\n    };\n    PlayerAi.prototype.transformValues = function (returnValue, winnerBoardPiece, depth) {\n        var isWon = winnerBoardPiece === this.boardPiece;\n        var isLost = winnerBoardPiece === this.enemyBoardPiece;\n        if (isWon) {\n            returnValue = utils_1.Utils.BIG_POSITIVE_NUMBER - 100;\n        }\n        else if (isLost) {\n            returnValue = utils_1.Utils.BIG_NEGATIVE_NUMBER + 100;\n        }\n        returnValue -= depth * depth;\n        return returnValue;\n    };\n    PlayerAi.prototype.getMove = function (state, depth, alpha, beta) {\n        var stateValue = this.getStateValue(state);\n        var isWon = stateValue.winnerBoardPiece === this.boardPiece;\n        var isLost = stateValue.winnerBoardPiece === this.enemyBoardPiece;\n        if (depth >= PlayerAi.MAX_DEPTH || isWon || isLost) {\n            return {\n                value: this.transformValues(stateValue.chain * this.ownBoardPieceValue, stateValue.winnerBoardPiece, depth),\n                move: -1\n            };\n        }\n        return (depth % 2 === 0)\n            ? this.minState(state, depth + 1, alpha, beta)\n            : this.maxState(state, depth + 1, alpha, beta);\n    };\n    PlayerAi.prototype.maxState = function (state, depth, alpha, beta) {\n        var value = utils_1.Utils.BIG_NEGATIVE_NUMBER;\n        var moveQueue = [];\n        for (var column = 0; column < board_1.Board.column; column++) {\n            var _a = utils_1.Utils.getMockPlayerAction(state, this.boardPiece, column), actionSuccessful = _a.success, nextState = _a.map;\n            if (actionSuccessful) {\n                var _b = this.getMove(nextState, depth, alpha, beta), nextValue = _b.value, nextMove = _b.move;\n                if (nextValue > value) {\n                    value = nextValue;\n                    moveQueue = [column];\n                }\n                else if (nextValue === value) {\n                    moveQueue.push(column);\n                }\n                if (value > beta) {\n                    return {\n                        value: value,\n                        move: utils_1.Utils.choose(moveQueue)\n                    };\n                }\n                alpha = Math.max(alpha, value);\n            }\n        }\n        return {\n            value: value,\n            move: utils_1.Utils.choose(moveQueue)\n        };\n    };\n    PlayerAi.prototype.minState = function (state, depth, alpha, beta) {\n        var value = utils_1.Utils.BIG_POSITIVE_NUMBER;\n        var moveQueue = [];\n        for (var column = 0; column < board_1.Board.column; column++) {\n            var _a = utils_1.Utils.getMockPlayerAction(state, this.enemyBoardPiece, column), actionSuccessful = _a.success, nextState = _a.map;\n            if (actionSuccessful) {\n                var _b = this.getMove(nextState, depth, alpha, beta), nextValue = _b.value, nextMove = _b.move;\n                if (nextValue < value) {\n                    value = nextValue;\n                    moveQueue = [column];\n                }\n                else if (nextValue === value) {\n                    moveQueue.push(column);\n                }\n                if (value < alpha) {\n                    return {\n                        value: value,\n                        move: utils_1.Utils.choose(moveQueue)\n                    };\n                }\n                beta = Math.min(beta, value);\n            }\n        }\n        return {\n            value: value,\n            move: utils_1.Utils.choose(moveQueue)\n        };\n    };\n    PlayerAi.prototype.getAction = function (board) {\n        return __awaiter(this, void 0, void 0, function () {\n            var state, action;\n            return __generator(this, function (_a) {\n                state = utils_1.Utils.clone(board.map);\n                action = this.maxState(state, 0, utils_1.Utils.BIG_NEGATIVE_NUMBER, utils_1.Utils.BIG_POSITIVE_NUMBER);\n                console.log(\"AI \" + this.boardPiece + \" choose column \" + action.move + \" with value of \" + action.value);\n                return [2 /*return*/, action.move];\n            });\n        });\n    };\n    return PlayerAi;\n}(player_1.Player));\nPlayerAi.MAX_DEPTH = 4;\nexports.PlayerAi = PlayerAi;\n\n//# sourceMappingURL=player-ai.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar player_1 = require(\"./player\");\nvar utils_1 = require(\"./utils\");\nvar PlayerHuman = (function (_super) {\n    __extends(PlayerHuman, _super);\n    function PlayerHuman(boardPiece, board) {\n        var _this = _super.call(this, boardPiece, board) || this;\n        _this.clickPromiseResolver = null;\n        _this.board = board;\n        document.addEventListener('click', function (evt) {\n            try {\n                _this.handleClick(evt);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n        return _this;\n    }\n    PlayerHuman.prototype.handleClick = function (event) {\n        var rect = this.board.canvas.getBoundingClientRect();\n        var x = event.clientX - rect.left;\n        var y = event.clientY - rect.top;\n        var column = utils_1.Utils.getColumnFromCoord({ x: x, y: y });\n        this.clickPromiseResolver(column);\n    };\n    PlayerHuman.prototype.getAction = function (board) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (r) { return _this.clickPromiseResolver = r; })];\n            });\n        });\n    };\n    return PlayerHuman;\n}(player_1.Player));\nexports.PlayerHuman = PlayerHuman;\n\n//# sourceMappingURL=player-human.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Player = (function () {\n    function Player(boardPiece, board) {\n        this.boardPiece = boardPiece;\n    }\n    return Player;\n}());\nexports.Player = Player;\n\n//# sourceMappingURL=player.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar board_1 = require(\"./board\");\nvar Utils = (function () {\n    function Utils() {\n    }\n    Utils.drawText = function (context, _a) {\n        var _b = _a.message, message = _b === void 0 ? '' : _b, _c = _a.x, x = _c === void 0 ? 0 : _c, _d = _a.y, y = _d === void 0 ? 0 : _d, _e = _a.fillStyle, fillStyle = _e === void 0 ? '#111' : _e, _f = _a.font, font = _f === void 0 ? '12pt sans-serif' : _f, _g = _a.maxWidth, maxWidth = _g === void 0 ? Utils.BIG_POSITIVE_NUMBER : _g;\n        context.save();\n        context.font = font;\n        context.fillStyle = fillStyle;\n        context.fillText(message, x, y, maxWidth);\n        context.restore();\n    };\n    Utils.drawCircle = function (context, _a) {\n        var _b = _a.x, x = _b === void 0 ? 0 : _b, _c = _a.y, y = _c === void 0 ? 0 : _c, _d = _a.r, r = _d === void 0 ? 0 : _d, _e = _a.fillStyle, fillStyle = _e === void 0 ? '' : _e, _f = _a.strokeStyle, strokeStyle = _f === void 0 ? '' : _f;\n        context.save();\n        context.fillStyle = fillStyle;\n        context.strokeStyle = strokeStyle;\n        context.beginPath();\n        context.arc(x, y, r, 0, 2 * Math.PI, false);\n        context.fill();\n        context.restore();\n    };\n    Utils.drawMask = function (board) {\n        var context = board.context;\n        context.save();\n        context.fillStyle = '#ddd';\n        context.beginPath();\n        var x, y;\n        for (y = 0; y < board_1.Board.row; y++) {\n            for (x = 0; x < board_1.Board.column; x++) {\n                context.arc(75 * x + 100, 75 * y + 50, 25, 0, 2 * Math.PI);\n                context.rect(75 * x + 150, 75 * y, -100, 100);\n            }\n        }\n        context.fill();\n        context.restore();\n    };\n    Utils.clearCanvas = function (board) {\n        board.context.clearRect(0, 0, board.canvas.width, board.canvas.height);\n    };\n    Utils.isCoordOnColumn = function (coord, columnXBegin, radius) {\n        return ((coord.x - columnXBegin) * (coord.x - columnXBegin) <= radius * radius);\n    };\n    Utils.getColumnFromCoord = function (coord) {\n        for (var i = 0; i < board_1.Board.column; i++) {\n            if (Utils.isCoordOnColumn(coord, 75 * i + 100, 25)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    Utils.getRandomColumnNumber = function () {\n        return Math.floor(Math.random() * board_1.Board.column);\n    };\n    Utils.choose = function (choice) {\n        return choice[Math.floor(Math.random() * choice.length)];\n    };\n    Utils.animationFrame = function () {\n        var resolve = null;\n        var promise = new Promise(function (r) { return resolve = r; });\n        window.requestAnimationFrame(resolve);\n        return promise;\n    };\n    Utils.clone = function (array) {\n        var arr = [];\n        for (var i = 0; i < array.length; i++) {\n            arr[i] = array[i].slice();\n        }\n        return arr;\n    };\n    Utils.getMockPlayerAction = function (map, boardPiece, column) {\n        var clonedMap = Utils.clone(map);\n        if (clonedMap[0][column] !== board_1.BoardPiece.EMPTY || column < 0 || column >= board_1.Board.column) {\n            return {\n                success: false,\n                map: clonedMap\n            };\n        }\n        var isColumnEverFilled = false;\n        var row = 0;\n        for (var i = 0; i < board_1.Board.row - 1; i++) {\n            if (clonedMap[i + 1][column] !== board_1.BoardPiece.EMPTY) {\n                isColumnEverFilled = true;\n                row = i;\n                break;\n            }\n        }\n        if (!isColumnEverFilled) {\n            row = board_1.Board.row - 1;\n        }\n        clonedMap[row][column] = boardPiece;\n        return {\n            success: true,\n            map: clonedMap\n        };\n    };\n    return Utils;\n}());\nUtils.BIG_POSITIVE_NUMBER = Math.pow(10, 9) + 7;\nUtils.BIG_NEGATIVE_NUMBER = -Utils.BIG_POSITIVE_NUMBER;\nexports.Utils = Utils;\n\n//# sourceMappingURL=utils.js.map\n"]}