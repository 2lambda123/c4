var $=Object.defineProperty;var z=(n,t,e)=>t in n?$(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var l=(n,t,e)=>(z(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();class H{constructor(t){l(this,"boardPiece");this.boardPiece=t}}const g=10**9+7,O=-g;function j(n,t,e){return(n.x-t)*(n.x-t)<=e*e}function F(n){for(let t=0;t<a.COLUMNS;t++)if(j(n,3*a.PIECE_RADIUS*t+a.MASK_X_BEGIN+2*a.PIECE_RADIUS,a.PIECE_RADIUS))return t;return-1}function v(n){return n[Math.floor(Math.random()*n.length)]}function B(n){const t=[];for(let e=0;e<n.length;e++)t[e]=n[e].slice();return t}function G(n,t,e){const i=B(n);if(i[0][e]!==u.EMPTY||e<0||e>=a.COLUMNS)return{success:!1,map:i};let o=!1,s=0;for(let r=0;r<a.ROWS-1;r++)if(i[r+1][e]!==u.EMPTY){o=!0,s=r;break}return o||(s=a.ROWS-1),i[s][e]=t,{success:!0,map:i}}var u=(n=>(n[n.EMPTY=0]="EMPTY",n[n.PLAYER_1=1]="PLAYER_1",n[n.PLAYER_2=2]="PLAYER_2",n[n.DRAW=3]="DRAW",n))(u||{});const h=class{constructor(){l(this,"map");l(this,"winnerBoardPiece");this.map=[],this.winnerBoardPiece=0,this.initConstants(),this.reset()}reset(){this.map=[];for(let t=0;t<h.ROWS;t++){this.map.push([]);for(let e=0;e<h.COLUMNS;e++)this.map[t].push(0)}this.winnerBoardPiece=0}initConstants(){h.CANVAS_HEIGHT=h.SCALE*480,h.CANVAS_WIDTH=h.SCALE*640,h.PIECE_RADIUS=h.SCALE*25,h.MASK_X_BEGIN=Math.max(0,h.CANVAS_WIDTH-(3*h.COLUMNS+1)*h.PIECE_RADIUS)/2,h.MASK_Y_BEGIN=Math.max(0,h.CANVAS_HEIGHT-(3*h.ROWS+1)*h.PIECE_RADIUS)/2,h.MESSAGE_WIDTH=h.SCALE*400,h.MESSAGE_X_BEGIN=(h.CANVAS_WIDTH-h.MESSAGE_WIDTH)/2,h.MESSAGE_Y_BEGIN=h.SCALE*20}async applyPlayerAction(t,e){const{success:i,map:o}=G(this.map,t.boardPiece,e);return this.map=o,i}debug(){console.log(this.map.map(t=>t.join(" ")).join(`
`))}getWinner(){if(this.winnerBoardPiece!==0)return this.winnerBoardPiece;const t=[[0,-1],[0,1],[-1,-1],[-1,0],[-1,1],[1,-1],[1,0],[1,1]],e=(o,s,r,c,d)=>d>=4?!0:o<0||s<0||o>=h.ROWS||s>=h.COLUMNS||this.map[o][s]!==r?!1:e(o+c[0],s+c[1],r,c,d+1);let i=0;for(let o=0;o<h.ROWS;o++)for(let s=0;s<h.COLUMNS;s++){const r=this.map[o][s];if(r!==0){for(let c=0;c<t.length;c++)if(e(o+t[c][0],s+t[c][1],r,t[c],1))return this.winnerBoardPiece=r}else i++}return i===0?this.winnerBoardPiece=3:0}getPlayerColor(t){switch(t){case 1:return h.PLAYER_1_COLOR;case 2:return h.PLAYER_2_COLOR;default:return"transparent"}}};let a=h;l(a,"ROWS",6),l(a,"COLUMNS",7),l(a,"PLAYER_1_COLOR","#ef453b"),l(a,"PLAYER_2_COLOR","#0059ff"),l(a,"PIECE_STROKE_STYLE","black"),l(a,"MASK_COLOR","#d8d8d8"),l(a,"CANVAS_HEIGHT"),l(a,"CANVAS_WIDTH"),l(a,"PIECE_RADIUS"),l(a,"MASK_X_BEGIN"),l(a,"MASK_Y_BEGIN"),l(a,"MESSAGE_WIDTH"),l(a,"MESSAGE_X_BEGIN"),l(a,"MESSAGE_Y_BEGIN"),l(a,"SCALE");const V=class extends H{constructor(e){super(e);l(this,"ownBoardPieceValue");l(this,"enemyBoardPiece");this.ownBoardPieceValue=this.getBoardPieceValue(e),this.enemyBoardPiece=e===u.PLAYER_1?u.PLAYER_2:u.PLAYER_1}getBoardPieceValue(e){return e===u.EMPTY?0:e===this.boardPiece?1:-1}getStateValue(e){let i=u.EMPTY,o=0;for(let s=0;s<a.ROWS;s++)for(let r=0;r<a.COLUMNS;r++){let c=0,d=0,C=0,E=0;for(let f=0;f<=3;f++)r+f<a.COLUMNS&&(c+=this.getBoardPieceValue(e[s][r+f])),s+f<a.ROWS&&(d+=this.getBoardPieceValue(e[s+f][r])),s+f<a.ROWS&&r+f<a.COLUMNS&&(C+=this.getBoardPieceValue(e[s+f][r+f])),s-f>=0&&r+f<7&&(E+=this.getBoardPieceValue(e[s-f][r+f]));o+=c*c*c,o+=d*d*d,o+=C*C*C,o+=E*E*E,Math.abs(c)===4?i=c>0?this.boardPiece:this.enemyBoardPiece:Math.abs(d)===4?i=d>0?this.boardPiece:this.enemyBoardPiece:Math.abs(C)===4?i=C>0?this.boardPiece:this.enemyBoardPiece:Math.abs(E)===4&&(i=E>0?this.boardPiece:this.enemyBoardPiece)}return{winnerBoardPiece:i,chain:o}}transformValues(e,i,o){const s=i===this.boardPiece,r=i===this.enemyBoardPiece;return e-=o*o,s?e=g-100-o*o:r&&(e=O+100+o*o),e}getMove(e,i,o,s){const r=this.getStateValue(e),c=r.winnerBoardPiece===this.boardPiece,d=r.winnerBoardPiece===this.enemyBoardPiece;return i>=V.MAX_DEPTH||c||d?{value:this.transformValues(r.chain,r.winnerBoardPiece,i)*this.ownBoardPieceValue,move:-1}:i%2===0?this.minState(e,i+1,o,s):this.maxState(e,i+1,o,s)}maxState(e,i,o,s){let r=O,c=[];for(let d=0;d<a.COLUMNS;d++){const{success:C,map:E}=G(e,this.boardPiece,d);if(!C)continue;const{value:f}=this.getMove(E,i,o,s);if(f>r?(r=f,c=[d]):f===r&&c.push(d),r>s)return{value:r,move:v(c)};o=Math.max(o,r)}return{value:r,move:v(c)}}minState(e,i,o,s){let r=g,c=[];for(let d=0;d<a.COLUMNS;d++){const{success:C,map:E}=G(e,this.enemyBoardPiece,d);if(!C)continue;const{value:f}=this.getMove(E,i,o,s);if(f<r?(r=f,c=[d]):f===r&&c.push(d),r<o)return{value:r,move:v(c)};s=Math.min(s,r)}return{value:r,move:v(c)}}async getAction(e){const i=B(e.map),o=this.maxState(i,0,O,g);return console.log(`AI ${this.boardPiece} choose column ${o.move} with value of ${o.value}`),o.move}};let N=V;l(N,"MAX_DEPTH",4);class p extends H{constructor(e){super(e);l(this,"clickPromiseResolver");this.clickPromiseResolver=null}doAction(e){this.clickPromiseResolver&&0<=e&&e<a.COLUMNS&&this.clickPromiseResolver(e)}getAction(e){return new Promise(i=>this.clickPromiseResolver=i)}}class k extends H{constructor(e){super(e);l(this,"actionPromiseResolver");this.actionPromiseResolver=null}doAction(e){this.actionPromiseResolver&&0<=e&&e<a.COLUMNS&&this.actionPromiseResolver(e)}getAction(e){return new Promise(i=>this.actionPromiseResolver=i)}}class X{constructor(t,e){l(this,"board");l(this,"players");l(this,"currentPlayerId");l(this,"isMoveAllowed",!1);l(this,"isGameWon",!1);this.board=e,this.players=t,this.currentPlayerId=0,this.reset()}reset(){this.isMoveAllowed=!1,this.isGameWon=!1,this.board.reset()}async start(){for(this.isMoveAllowed=!0;!this.isGameWon;){await this.move();const t=this.board.getWinner();if(t!==u.EMPTY){console.log("[GameBase] Game over: winner is player ",t),this.isGameWon=!0,this.isMoveAllowed=!1,this.announceWinner(t);break}}}async move(){if(!this.isMoveAllowed)return;const t=this.players[this.currentPlayerId];let e=!1;for(;!e;){this.waitingForMove();const i=await t.getAction(this.board);this.isMoveAllowed=!1,this.beforeMoveApplied(i),e=await this.board.applyPlayerAction(t,i),this.isMoveAllowed=!0,e?this.afterMove(i):console.log("Move not allowed! Try again.")}this.currentPlayerId=this.getNextPlayer()}announceWinner(t){const e={[u.DRAW]:"draw",[u.PLAYER_1]:"Player 1",[u.PLAYER_2]:"Player 2",[u.EMPTY]:"none"}[t];console.log("[GameBase] Game over: winner is ",e,t)}getNextPlayer(){return this.currentPlayerId===0?1:0}}var A=(n=>(n.NEW_PLAYER_CONNECTION_REQUEST="NEW_PLAYER_CONNECTION_REQUEST",n.NEW_PLAYER_CONNECTION_OK="NEW_PLAYER_CONNECTION_OK",n.NEW_MATCH_REQUEST="NEW_MATCH_REQUEST",n.NEW_MATCH_OK="NEW_MATCH_OK",n.GAME_READY="GAME_READY",n.GAME_ENDED="GAME_ENDED",n.GAME_RESET="GAME_RESET",n.CONNECT_MATCH_REQUEST="CONNECT_MATCH_REQUEST",n.CONNECT_MATCH_OK="CONNECT_MATCH_OK",n.CONNECT_MATCH_FAIL="CONNECT_MATCH_FAIL",n.HUNG_UP="HUNG_UP",n.OTHER_PLAYER_HUNGUP="OTHER_PLAYER_HUNGUP",n.MOVE_MAIN="MOVE_MAIN",n.MOVE_SHADOW="MOVE_SHADOW",n))(A||{});function w(n,t){return console.log("[ws] send: ",n,t),JSON.stringify({type:n,payload:t||{}})}function J(n){const t=JSON.parse(n);return console.log("[ws] receive: ",t),t}function Z(){const n=[];let t=!1;function e(){t||(t=!0,window.requestAnimationFrame?window.requestAnimationFrame(i):setTimeout(i,66))}function i(){n.forEach(s=>{s()}),t=!1}function o(s){s&&n.push(s)}return{add:s=>{n.length||window.addEventListener("resize",e),o(s)}}}function K(n,{x:t=0,y:e=0,r:i=0,fillStyle:o="",strokeStyle:s=""}){n.save(),n.fillStyle=o,n.strokeStyle=s,n.beginPath(),n.arc(t,e,i,0,2*Math.PI,!1),n.fill(),n.restore()}function ee(n){const t=n.context;t.save(),t.fillStyle=m.MASK_COLOR,t.beginPath();const e=2*m.PIECE_RADIUS,i=3*m.PIECE_RADIUS;for(let o=0;o<m.ROWS;o++)for(let s=0;s<m.COLUMNS;s++)t.arc(i*s+m.MASK_X_BEGIN+e,i*o+m.MASK_Y_BEGIN+e,m.PIECE_RADIUS,0,2*Math.PI),t.rect(i*s+m.MASK_X_BEGIN+2*e,i*o+m.MASK_Y_BEGIN,-2*e,2*e);t.fill(),t.restore()}function b(n){n.context.clearRect(0,0,m.CANVAS_WIDTH,m.CANVAS_HEIGHT)}function L(){let n=null;const t=new Promise(e=>n=e);return n&&window.requestAnimationFrame(n),t}class m extends a{constructor(e){super();l(this,"canvas");l(this,"context");this.canvas=e,this.context=e.getContext("2d"),this.getBoardScale(),this.initConstants(),this.reset(),this.onresize()}getBoardScale(){return window.innerWidth<640?a.SCALE=.5:a.SCALE=1}onresize(){let e=a.SCALE;Z().add(()=>{this.getBoardScale(),e!==a.SCALE&&(e=a.SCALE,this.initConstants(),b(this),this.render())})}reset(){super.reset(),this.canvas&&(b(this),this.render())}initConstants(){if(super.initConstants(),this.canvas){const e=self.devicePixelRatio||1;this.canvas.width=m.CANVAS_WIDTH*e,this.canvas.height=m.CANVAS_HEIGHT*e,this.context.scale(e,e),this.canvas.style.width=m.CANVAS_WIDTH+"px",this.canvas.style.height=m.CANVAS_HEIGHT+"px"}}async animateAction(e,i,o){const s=this.getPlayerColor(o);let r=0;const c=async()=>{b(this),K(this.context,{x:3*a.PIECE_RADIUS*i+a.MASK_X_BEGIN+2*a.PIECE_RADIUS,y:r+a.MASK_Y_BEGIN+2*a.PIECE_RADIUS,r:a.PIECE_RADIUS,fillStyle:s,strokeStyle:a.PIECE_STROKE_STYLE}),this.render(),r+=a.PIECE_RADIUS};for(;e*3*a.PIECE_RADIUS>=r;)await L(),c()}render(){ee(this);for(let e=0;e<a.ROWS;e++)for(let i=0;i<a.COLUMNS;i++)K(this.context,{x:3*a.PIECE_RADIUS*i+a.MASK_X_BEGIN+2*a.PIECE_RADIUS,y:3*a.PIECE_RADIUS*e+a.MASK_Y_BEGIN+2*a.PIECE_RADIUS,r:a.PIECE_RADIUS,fillStyle:this.getPlayerColor(this.map[e][i]),strokeStyle:a.PIECE_STROKE_STYLE})}async applyPlayerAction(e,i){if(this.map[0][i]!==u.EMPTY||i<0||i>=a.COLUMNS)return!1;let o=!1,s=0;for(let r=0;r<a.ROWS-1;r++)if(this.map[r+1][i]!==u.EMPTY){o=!0,s=r;break}return o||(s=a.ROWS-1),await this.animateAction(s,i,e.boardPiece),this.map[s][i]=e.boardPiece,this.debug(),await L(),this.render(),!0}}function R(n=""){const t=document.querySelector(".message-body");if(!t){console.error(".message-body not found");return}const e=document.querySelector(".message-body-content");if(!e){console.error(".message-body-content not found");return}e.innerHTML=n,t.showModal()}const T=document.querySelector(".statusbox"),S=document.querySelector(".statusbox-body-game"),W=document.querySelector(".statusbox-body-connection"),_=document.querySelector(".statusbox-body-player");class Y extends X{constructor(t,e){super(t,e)}beforeMoveApplied(){S&&(S.textContent=`Dropping ${this.currentPlayerId===0?"🔴":"🔵"} disc`)}waitingForMove(){!this.isMoveAllowed||this.isGameWon||(S&&(S.textContent="Wating for move"),_&&(_.textContent=this.currentPlayerId===0?"Player 1 🔴":"Player 2 🔵"))}afterMove(){}announceWinner(t){if(super.announceWinner(t),t===u.EMPTY)return;let e="<h1>Thank you for playing.</h1>";t===u.DRAW?e+="It's a draw":e+=`Player ${t} wins`,e+=".<br />After dismissing this message, click the board to reset game.",R(e),S&&(S.textContent="Game over"),_&&(_.textContent=t===u.DRAW?"It's a draw":`Player ${t===u.PLAYER_1?"1 🔴":"2 🔵"} wins`)}}function Q(n,t){const e=document.querySelector("canvas");if(!e){console.error("Canvas DOM is null");return}const i=new m(e),o=new p(u.PLAYER_1),s=new n([o,t],i);T==null||T.classList.remove("hidden"),W==null||W.classList.add("hidden"),s.start(),S&&(S.textContent="Wating for move"),_&&(_.textContent="Player 1 🔴"),e.addEventListener("click",async r=>{if(s.isGameWon)s.reset(),await L(),s.start();else{const c=e.getBoundingClientRect(),d=r.clientX-c.left,C=r.clientY-c.top,E=F({x:d,y:C});s.currentPlayerId===0?o.doAction(E):s.currentPlayerId===1&&t instanceof p&&t.doAction(E)}})}class te extends Y{}function ne(){Q(te,new p(u.PLAYER_2))}class se extends Y{}function oe(){Q(se,new N(u.PLAYER_2))}const x=document.querySelector(".statusbox");document.querySelector(".statusbox-body-game");const D=document.querySelector(".statusbox-body-connection");document.querySelector(".statusbox-body-player");class ie extends Y{constructor(t,e){super(t,e)}}function re(){const n=document.querySelector("canvas");if(!n){console.error("Canvas DOM is null");return}const t=new m(n),e=new N(u.PLAYER_1),i=new N(u.PLAYER_2),o=new ie([e,i],t);x==null||x.classList.remove("hidden"),D==null||D.classList.add("hidden"),o.start(),n.addEventListener("click",async s=>{o.isGameWon&&(o.reset(),await L(),o.start())})}var I=(n=>(n[n.FIRST=u.PLAYER_1]="FIRST",n[n.SECOND=u.PLAYER_2]="SECOND",n))(I||{});const U=document.querySelector(".statusbox"),y=document.querySelector(".statusbox-body-game"),M=document.querySelector(".statusbox-body-connection"),P=document.querySelector(".statusbox-body-player"),ae={}.C4_SERVER_ENDPOINT?{}.C4_SERVER_ENDPOINT:"wss://c4-server.fly.dev/";class ce extends X{constructor(e,i,{gameMode:o}){super(e,i);l(this,"connectionPlayerId",null);l(this,"connectionMatchId",null);l(this,"ws",null);l(this,"gameMode");l(this,"playerMain");l(this,"playerShadow");l(this,"initMatch",()=>{this.ws&&this.ws.send(w(A.NEW_MATCH_REQUEST,{playerId:this.connectionPlayerId}))});l(this,"connectToMatch",e=>{this.ws&&this.ws.send(w(A.CONNECT_MATCH_REQUEST,{playerId:this.connectionPlayerId,matchId:e}))});l(this,"messageActionHandler",e=>{var i;switch(e.type){case A.NEW_PLAYER_CONNECTION_OK:if(this.connectionPlayerId=e.payload.playerId,this.gameMode===I.FIRST)this.initMatch();else if(this.gameMode===I.SECOND){const s=new URLSearchParams(location.search).get("matchId");if(!s)return;this.connectToMatch(s)}break;case A.NEW_MATCH_OK:{this.connectionMatchId=e.payload.matchId;const o=`${location.href}?matchId=${this.connectionMatchId}`;console.log("[url] Share this",o),R(`<h1>Share this URL</h1><p>Please share this URL to your friend to start the game: <input type="text" id="copy-box" class="copy-box" readonly value="${o}" /><button type="button" id="copy-button">Copy</button></p>`);const s=document.getElementById("copy-box");s.focus(),s.select(),(i=document.getElementById("copy-button"))==null||i.addEventListener("click",async()=>{let r=!1;if(navigator.clipboard)try{await navigator.clipboard.writeText(o),console.log("Using Clipboard API to write share url into clipboard"),r=!0}catch{}r||(s==null||s.select(),s==null||s.setSelectionRange(0,99999),document.execCommand("copy"),console.log("Using fallback method to write share url into clipboard"))})}break;case A.CONNECT_MATCH_OK:this.connectionMatchId=e.payload.matchId;break;case A.CONNECT_MATCH_FAIL:R("<h1>Error</h1> Failed to connect to match."),M&&(M.textContent="Connection error");break;case A.GAME_READY:R(`<h1>Game started</h1> The first piece should be dropped by ${this.isCurrentMoveByCurrentPlayer()?"you":"the other player"}`),y&&(y.textContent="Wating for move"),P&&(P.textContent=(this.currentPlayerId===0?"Player 1 🔴":"Player 2 🔵")+" "+(this.isCurrentMoveByCurrentPlayer()?"(you)":"(the other player)")),this.start();break;case A.MOVE_SHADOW:this.playerShadow.doAction(e.payload.column);break;case A.GAME_ENDED:{const{winnerBoardPiece:o}=e.payload,s=o===u.DRAW?"It's a draw":`Player ${o===u.PLAYER_1?"1 🔴":"2 🔵"} wins`;R("<h1>Thank you for playing</h1>"+s+"<br />Next game will be started in 10 seconds."),y&&(y.textContent="Game over"),P&&(P.textContent=s)}break;case A.GAME_RESET:this.reset();break;case A.OTHER_PLAYER_HUNGUP:R("<h1>Other player disconnected</h1> Please reload the page to start a new match");break}});l(this,"beforeMoveApplied",()=>{y&&(y.textContent=`Dropping ${this.currentPlayerId===0?"🔴":"🔵"} disc`)});l(this,"waitingForMove",()=>{y&&(y.textContent="Wating for move"),P&&(P.textContent=(this.currentPlayerId===0?"Player 1 🔴":"Player 2 🔵")+" "+(this.isCurrentMoveByCurrentPlayer()?"(you)":"(the other player)"))});l(this,"afterMove",e=>{this.ws&&this.isCurrentMoveByCurrentPlayer()&&this.ws.send(w(A.MOVE_MAIN,{playerId:this.connectionPlayerId,matchId:this.connectionMatchId,column:e}))});this.gameMode=o,o===I.FIRST?(this.playerMain=e[0],this.playerShadow=e[1]):(this.playerMain=e[1],this.playerShadow=e[0]),this.initConnection()}initConnection(){this.connectionPlayerId=null,this.connectionMatchId=null,this.ws&&this.ws.close();const e=()=>{this.isMoveAllowed=!1,M&&(M.textContent="Disconnected from server"),y&&(y.textContent="Game over"),P&&(P.textContent="Disconnected from match")};this.ws=new WebSocket(ae),this.ws.addEventListener("message",i=>{this.messageActionHandler(J(i.data))}),this.ws.addEventListener("open",()=>{this.ws&&this.ws.send(w(A.NEW_PLAYER_CONNECTION_REQUEST)),M&&(M.textContent="Connected to server")}),this.ws.addEventListener("close",i=>{console.log("[ws] close event",i),e()}),this.ws.addEventListener("error",i=>{console.log("[ws] error event",i),e()})}isCurrentMoveByCurrentPlayer(){return this.currentPlayerId+1===this.gameMode}announceWinner(e){super.announceWinner(e)}}function q(){const n=document.querySelector("canvas");if(!n){console.error("Canvas DOM is null");return}const i=new URLSearchParams(location.search).get("matchId")?I.SECOND:I.FIRST,o=new m(n),s=i===I.FIRST?[new p(u.PLAYER_1),new k(u.PLAYER_2)]:[new k(u.PLAYER_1),new p(u.PLAYER_2)],r=new ce(s,o,{gameMode:i});U==null||U.classList.remove("hidden"),n.addEventListener("click",async c=>{if(!r.isGameWon){const d=n.getBoundingClientRect(),C=c.clientX-d.left,E=c.clientY-d.top,f=F({x:C,y:E});r.playerMain.doAction(f)}})}document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".section-canvas");if(!n){console.error("Canvas element not found");return}const t=document.querySelector(".mode-chooser");if(!t){console.error("Mode element not found ");return}if(new m(n).render(),new URLSearchParams(location.search).get("matchId")){q();return}t.showModal();const s=document.querySelector(".mode-chooser-form");if(!s){console.error(".mode-chooser-form not found ");return}t.addEventListener("cancel",c=>{c.preventDefault()}),t.addEventListener("close",c=>{const d=new FormData(s);r(d.get("mode"))});function r(c){console.log("initGame chosenMode:",c),c==="offline-human"?ne():c==="offline-ai"?oe():c==="online-human"?q():c==="ai-vs-ai"?re():console.error("Invalid game mode received",c)}});
